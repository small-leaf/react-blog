(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(n,t,e){"use strict";e.r(t);var r=e(0),c=e(1),i=e(20),a=e.n(i),o=e(4),u=e(2),s=e(3),j=function(n){localStorage.setItem("token",n)},b=function(){return localStorage.getItem("token")},d="https://student-json-api.lidemy.me",p=function(){return fetch("".concat(d,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},l=function(n){return fetch("".concat(d,"/posts?_page=").concat(n,"&_limit=5&_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},f=function(){var n=b();return fetch("".concat(d,"/me"),{method:"GET",headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},x=e(5),h=Object(c.createContext)(null);function O(){var n=Object(u.a)(["\n  margin: 53px auto;\n  width: 400px;\n  height: 56px;\n  outline: transparent;\n  background-color: gray;\n  border-radius: 20px;\n  border: 1px solid gray;\n  color: white;\n  cursor: pointer;\n  font-size: 18px;\n"]);return O=function(){return n},n}function g(){var n=Object(u.a)(["\n  font-size: 14px;\n  margin-left: 21px;\n"]);return g=function(){return n},n}function v(){var n=Object(u.a)(["\n  margin-top: 23px;\n\n  input {\n    width: 350px;\n    height: 40px;\n    padding: 0 20px;\n    font-size: 16px;\n    border-radius: 20px;\n    outline: transparent;\n  }\n"]);return v=function(){return n},n}function m(){var n=Object(u.a)(["\n  margin: 50px auto;\n  width: 500px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 62px 72px; ;\n"]);return m=function(){return n},n}function w(){var n=Object(u.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  color: red;\n"]);return w=function(){return n},n}var y=s.a.div(w()),S=s.a.form(m()),k=s.a.div(v()),z=s.a.div(g()),C=s.a.button(O());var E=function(){var n=Object(c.useContext)(h).setUser,t=Object(c.useState)(""),e=Object(o.a)(t,2),i=e[0],a=e[1],u=Object(c.useState)(""),s=Object(o.a)(u,2),b=s[0],p=s[1],l=Object(c.useState)(),O=Object(o.a)(l,2),g=O[0],v=O[1],m=Object(c.useState)(!1),w=Object(o.a)(m,2),E=w[0],A=w[1],D=Object(x.f)();return Object(r.jsxs)(S,{onSubmit:function(t){t.preventDefault(),E||(A(!0),v(null),function(n,t){return fetch("".concat(d,"/login"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,b).then((function(t){if(1!==t.ok)return A(!1),v(t.message);j(t.token),f().then((function(t){if(0===t.ok)return j(null),A(!1),v(t.message);n(t.data),A(!1),D.push("/")}))})))},children:[Object(r.jsxs)(k,{children:[Object(r.jsx)(z,{children:"USERNAME"}),Object(r.jsx)("input",{value:i,onChange:function(n){return a(n.target.value)}})]}),Object(r.jsxs)(k,{children:[Object(r.jsx)(z,{children:"PASSWORD"}),Object(r.jsx)("input",{type:"password",value:b,onChange:function(n){return p(n.target.value)}})]}),Object(r.jsx)(C,{children:"\u767b\u5165"}),g&&Object(r.jsx)(y,{children:g})]})},A=e(7);function D(){var n=Object(u.a)(["\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  border: 5px solid black;\n  border-right-color: transparent;\n  border-radius: 50%;\n  animation: "," 0.75s linear infinite;\n"]);return D=function(){return n},n}function N(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n"]);return N=function(){return n},n}function $(){var n=Object(u.a)(["\n   from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]);return $=function(){return n},n}var _=Object(s.b)($()),P=s.a.div(N()),R=s.a.div(D(),_),U=function(){return Object(r.jsx)(P,{children:Object(r.jsx)(R,{})})};function J(){var n=Object(u.a)(["\n  position: relative;\n  padding: 10px 20px;\n  margin-left: 2px;\n  color: black;\n  background-color: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.3);\n  border-radius: 5px;\n  cursor: pointer;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.5);\n    color: white;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\n  }\n"]);return J=function(){return n},n}function M(){var n=Object(u.a)(["\n  margin: 50px 0;\n  display: flex;\n  justify-content: center;\n"]);return M=function(){return n},n}function B(){var n=Object(u.a)(["\n  display: inline-block;\n  padding: 12px 16px;\n  border: solid 1px #737373;\n  color: #737373;\n  margin-top: 36px;\n  text-decoration: none;\n"]);return B=function(){return n},n}function I(){var n=Object(u.a)(["\n  margin-top: 20px;\n  overflow: hidden;\n  line-height: 1.5em;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]);return I=function(){return n},n}function L(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return L=function(){return n},n}function T(){var n=Object(u.a)(["\n  color: black;\n  font-size: 24px;\n"]);return T=function(){return n},n}function F(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return F=function(){return n},n}function G(){var n=Object(u.a)(["\n  padding: 30px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\n  margin-top: 24px;\n"]);return G=function(){return n},n}function W(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return W=function(){return n},n}var K=s.a.div(W()),V=s.a.div(G()),q=s.a.div(F()),H=s.a.div(T()),Q=s.a.div(L()),X=s.a.div(I()),Y=Object(s.a)(A.b)(B()),Z=s.a.div(M()),nn=s.a.a(J()),tn=function(n){var t=n.post;return Object(r.jsxs)(V,{children:[Object(r.jsxs)(q,{children:[Object(r.jsx)(H,{children:t.title}),Object(r.jsx)(Q,{children:new Date(t.createdAt).toLocaleString()})]}),Object(r.jsx)(X,{children:t.body}),Object(r.jsx)(Y,{to:"/post/".concat(t.id),children:"READ MORE"})]})},en=function(){var n=Object(c.useState)([]),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)([]),u=Object(o.a)(a,2),s=u[0],j=u[1],b=function(n){return function(){l(n).then((function(n){i(n)}))}};return Object(c.useEffect)((function(){p().then((function(n){var t=Math.ceil(n.length/5);j(function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(t)),l(1).then((function(n){return i(n)}))}))}),[]),Object(r.jsx)(K,{children:e.length>0?Object(r.jsxs)(r.Fragment,{children:[e.map((function(n){return Object(r.jsx)(tn,{post:n},n.id)})),Object(r.jsx)(Z,{children:s&&s.map((function(n){return Object(r.jsx)(nn,{onClick:b(n),children:n},n)}))})]}):Object(r.jsx)(U,{})})},rn=e.p+"static/media/LOGO.6b8bea6d.png";function cn(){var n=Object(u.a)(["\n  padding: 30px 50px;\n  color: white;\n  font-weight: bold;\n"]);return cn=function(){return n},n}function an(){var n=Object(u.a)(["\n  text-align: center;\n  font-size: 1.5em;\n  font-weight: bold;\n  color: white;\n"]);return an=function(){return n},n}function on(){var n=Object(u.a)(["\n  position: relative;\n  z-index: 2;\n  text-align: center;\n  padding-top: 60px;\n\n  img {\n    width: 100px;\n    height: 100px;\n  }\n"]);return on=function(){return n},n}function un(){var n=Object(u.a)(['\n  position: relative;\n  background: url(https://i.imgur.com/b0S7pGV.gif) center top no-repeat;\n  background-size: cover;\n  height: 400px;\n  border-radius: 20px;\n  overflow: hidden;\n\n  &:after {\n    position: absolute;\n    content: "";\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background: rgba(0, 0, 0, 0.5);\n  }\n']);return un=function(){return n},n}function sn(){var n=Object(u.a)(["\n  margin: 30px auto;\n  position: relative;\n  width: 900px;\n  padding: 20px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n"]);return sn=function(){return n},n}var jn=s.a.div(sn()),bn=s.a.div(un()),dn=s.a.div(on()),pn=s.a.div(an()),ln=s.a.div(cn()),fn=function(){return Object(r.jsx)(jn,{children:Object(r.jsx)(bn,{children:Object(r.jsxs)(dn,{children:[Object(r.jsx)("img",{src:rn,alt:"logo"}),Object(r.jsx)(pn,{children:"small_leaf"}),Object(r.jsx)(ln,{children:"\u660e\u77e5\u6b64\u82b1\u7d42\u5c07\u8b1d\uff0c\u7136\u4ea6\u8ff7\u6200\u96e3\u81ea\u62d4"})]})})})};function xn(){var n=Object(u.a)(["\n  margin: 53px auto;\n  width: 400px;\n  height: 56px;\n  outline: transparent;\n  background-color: gray;\n  border-radius: 20px;\n  border: 1px solid gray;\n  color: white;\n  cursor: pointer;\n  font-size: 18px;\n"]);return xn=function(){return n},n}function hn(){var n=Object(u.a)(["\n  font-size: 14px;\n  margin-left: 21px;\n"]);return hn=function(){return n},n}function On(){var n=Object(u.a)(["\n  margin-top: 23px;\n\n  input {\n    width: 350px;\n    height: 40px;\n    padding: 0 20px;\n    font-size: 16px;\n    border-radius: 20px;\n    outline: transparent;\n  }\n"]);return On=function(){return n},n}function gn(){var n=Object(u.a)(["\n  margin: 50px auto;\n  width: 500px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 62px 72px; ;\n"]);return gn=function(){return n},n}function vn(){var n=Object(u.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  color: red;\n"]);return vn=function(){return n},n}var mn=s.a.div(vn()),wn=s.a.form(gn()),yn=s.a.div(On()),Sn=s.a.div(hn()),kn=s.a.button(xn()),zn=function(){var n=Object(c.useContext)(h).setUser,t=Object(c.useState)(""),e=Object(o.a)(t,2),i=e[0],a=e[1],u=Object(c.useState)(""),s=Object(o.a)(u,2),b=s[0],p=s[1],l=Object(c.useState)(""),O=Object(o.a)(l,2),g=O[0],v=O[1],m=Object(c.useState)(),w=Object(o.a)(m,2),y=w[0],S=w[1],k=Object(c.useState)(!1),z=Object(o.a)(k,2),C=z[0],E=z[1],A=Object(x.f)();return Object(r.jsxs)(wn,{onSubmit:function(t){t.preventDefault(),C||(E(!0),S(null),function(n,t,e){return fetch("".concat(d,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:t,username:n,password:e})}).then((function(n){return n.json()}))}(i,b,g).then((function(t){if(0===t.ok)return E(!1),S(t.message);j(t.token),f().then((function(t){if(0===t.ok)return j(null),E(!1),S(t.message);n(t.data),E(!1),A.push("/")}))})))},children:[Object(r.jsxs)(yn,{children:[Object(r.jsx)(Sn,{children:"USERNAME"}),Object(r.jsx)("input",{value:i,onChange:function(n){return a(n.target.value)}})]}),Object(r.jsxs)(yn,{children:[Object(r.jsx)(Sn,{children:"NICKNAME"}),Object(r.jsx)("input",{value:b,onChange:function(n){return p(n.target.value)}})]}),Object(r.jsxs)(yn,{children:[Object(r.jsx)(Sn,{children:"PASSWORD"}),Object(r.jsx)("input",{type:"password",value:g,onChange:function(n){return v(n.target.value)}})]}),Object(r.jsx)(kn,{children:"\u8a3b\u518a"}),y&&Object(r.jsx)(mn,{children:y})]})};function Cn(){var n=Object(u.a)(["\n  margin-top: 20px;\n  white-space: pre-line;\n  word-break: break-word;\n"]);return Cn=function(){return n},n}function En(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return En=function(){return n},n}function An(){var n=Object(u.a)(["\n  color: black;\n  font-size: 24px;\n"]);return An=function(){return n},n}function Dn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Dn=function(){return n},n}function Nn(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 50px auto;\n  padding: 30px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\n"]);return Nn=function(){return n},n}var $n=s.a.div(Nn()),_n=s.a.div(Dn()),Pn=s.a.div(An()),Rn=s.a.div(En()),Un=s.a.div(Cn()),Jn=function(){var n=Object(c.useState)(""),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(x.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(d,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(a).then((function(n){return i(n[0])}))}),[a]),Object(r.jsx)(r.Fragment,{children:e?Object(r.jsxs)($n,{children:[Object(r.jsxs)(_n,{children:[Object(r.jsx)(Pn,{children:e.title}),Object(r.jsx)(Rn,{children:new Date(e.createdAt).toLocaleString()})]}),Object(r.jsx)(Un,{children:e.body})]}):Object(r.jsx)(U,{})})};function Mn(){var n=Object(u.a)(["\n  margin: 53px auto;\n  width: 400px;\n  height: 56px;\n  outline: transparent;\n  background-color: gray;\n  border-radius: 20px;\n  border: 1px solid gray;\n  color: white;\n  cursor: pointer;\n  font-size: 18px;\n"]);return Mn=function(){return n},n}function Bn(){var n=Object(u.a)(["\n  width: 700px;\n  height: 200px;\n  padding: 8px 13px;\n  font-size: 16px;\n  box-sizing: border-box;\n"]);return Bn=function(){return n},n}function In(){var n=Object(u.a)(["\n  margin-right: 20px;\n  font-size: 22px;\n"]);return In=function(){return n},n}function Ln(){var n=Object(u.a)(["\n  width: 800px;\n  display: flex;\n\n  & + & {\n    margin-top: 23px;\n  }\n  input {\n    width: 700px;\n    height: 40px;\n    padding: 0 13px;\n    box-sizing: border-box;\n    font-size: 16px;\n    outline: transparent;\n  }\n"]);return Ln=function(){return n},n}function Tn(){var n=Object(u.a)(["\n  margin: 30px auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 62px 72px; ;\n"]);return Tn=function(){return n},n}function Fn(){var n=Object(u.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  color: red;\n"]);return Fn=function(){return n},n}var Gn=s.a.div(Fn()),Wn=s.a.form(Tn()),Kn=s.a.div(Ln()),Vn=s.a.div(In()),qn=s.a.textarea(Bn()),Hn=s.a.button(Mn()),Qn=function(){var n=Object(c.useState)(""),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),u=Object(o.a)(a,2),s=u[0],j=u[1],p=Object(c.useState)(),l=Object(o.a)(p,2),f=l[0],h=l[1],O=Object(c.useState)(!1),g=Object(o.a)(O,2),v=g[0],m=g[1],w=Object(x.f)();return Object(r.jsxs)(Wn,{onSubmit:function(n){n.preventDefault(),v||(m(!0),h(null),function(n,t){var e=b();return fetch("".concat(d,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(n){if(0===n.ok)return m(!1),h(n.message);m(!1),w.push("/")})))},children:[Object(r.jsxs)(Kn,{children:[Object(r.jsx)(Vn,{children:"\u6a19\u984c"}),Object(r.jsx)("input",{value:e,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(Kn,{children:[Object(r.jsx)(Vn,{children:"\u5167\u5bb9"}),Object(r.jsx)(qn,{value:s,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsx)(Hn,{children:"\u767c\u5e03"}),f&&Object(r.jsx)(Gn,{children:f})]})};function Xn(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return Xn=function(){return n},n}function Yn(){var n=Object(u.a)(["\n  text-decoration: none;\n  color: black;\n  font-size: 24px;\n"]);return Yn=function(){return n},n}function Zn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 30px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\n  margin-top: 24px;\n\n  &:last-child {\n    margin-bottom: 24px;\n  }\n"]);return Zn=function(){return n},n}function nt(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return nt=function(){return n},n}var tt=s.a.div(nt()),et=s.a.div(Zn()),rt=Object(s.a)(A.b)(Yn()),ct=s.a.div(Xn()),it=function(n){var t=n.post;return Object(r.jsxs)(et,{children:[Object(r.jsx)(rt,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(ct,{children:new Date(t.createdAt).toLocaleString()})]})},at=function(){var n=Object(c.useState)([]),t=Object(o.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){p().then((function(n){return i(n)}))}),[]),Object(r.jsx)(tt,{children:e.length>0?e.map((function(n){return Object(r.jsx)(it,{post:n},n.id)})):Object(r.jsx)(U,{})})};function ot(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  "," {\n    margin-left: 30px;\n  }\n"]);return ot=function(){return n},n}function ut(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100px;\n  height: 64px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return ut=function(){return n},n}function st(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return st=function(){return n},n}function jt(){var n=Object(u.a)(["\n  font-size: 32px;\n  font-weight: bold;\n  color: rgba(0, 0, 0, 0.6);\n  text-decoration: none;\n"]);return jt=function(){return n},n}function bt(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  box-sizing: border-box;\n  background: white;\n  z-index: 2;\n"]);return bt=function(){return n},n}var dt=s.a.div(bt()),pt=Object(s.a)(A.b)(jt()),lt=s.a.div(st()),ft=Object(s.a)(A.b)(ut(),(function(n){return n.$active&&"background: rgba(0, 0, 0, 0.2)"})),xt=s.a.div(ot(),lt);var ht=function(){var n=Object(c.useContext)(h),t=n.user,e=n.setUser,i=Object(x.g)(),a=Object(x.f)();return Object(r.jsxs)(dt,{children:[Object(r.jsxs)(xt,{children:[Object(r.jsx)(pt,{to:"/",children:"Blog"}),Object(r.jsxs)(lt,{children:[Object(r.jsx)(ft,{to:"/",$active:"/"===i.pathname,children:"\u9996\u9801"}),Object(r.jsx)(ft,{to:"/post-list",$active:"/post-list"===i.pathname,children:"\u6587\u7ae0\u5217\u8868"}),Object(r.jsx)(ft,{to:"/about-me",$active:"/about-me"===i.pathname,children:"\u95dc\u65bc\u6211"})]})]}),Object(r.jsxs)(lt,{children:[!t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ft,{to:"/login",$active:"/login"===i.pathname,children:"\u767b\u5165"}),Object(r.jsx)(ft,{to:"/register",$active:"/register"===i.pathname,children:"\u8a3b\u518a"})]}),t&&Object(r.jsx)(ft,{to:"/new-post",$active:"/new-post"===i.pathname,children:"\u767c\u5e03\u6587\u7ae0"}),t&&Object(r.jsx)(ft,{onClick:function(){j(""),e(null),"/"!==i.pathname&&a.push("/")},children:"\u767b\u51fa"})]})]})};function Ot(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return Ot=function(){return n},n}var gt=s.a.div(Ot());var vt=function(){var n=Object(c.useState)((function(){return b()?f().then((function(n){n.ok&&i(n.data)})):null})),t=Object(o.a)(n,2),e=t[0],i=t[1];return Object(r.jsx)(h.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)(gt,{children:Object(r.jsxs)(A.a,{children:[Object(r.jsx)(ht,{}),Object(r.jsxs)(x.c,{children:[Object(r.jsx)(x.a,{exact:!0,path:"/",children:Object(r.jsx)(en,{})}),Object(r.jsx)(x.a,{path:"/post-list",children:Object(r.jsx)(at,{})}),Object(r.jsx)(x.a,{path:"/about-me",children:Object(r.jsx)(fn,{})}),Object(r.jsx)(x.a,{path:"/login",children:Object(r.jsx)(E,{})}),Object(r.jsx)(x.a,{path:"/register",children:Object(r.jsx)(zn,{})}),Object(r.jsx)(x.a,{path:"/post/:id",children:Object(r.jsx)(Jn,{})}),Object(r.jsx)(x.a,{path:"/new-post",children:Object(r.jsx)(Qn,{})})]})]})})})};a.a.render(Object(r.jsx)(vt,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.699e69c0.chunk.js.map